@page "/materiais"
@using Microsoft.AspNetCore.Authorization
@using System.Text.RegularExpressions
@attribute [Authorize(Roles = "Master, User")]
@inject NavigationManager Nav

<h3 class="mb-4">Manage Materials</h3>

<div class="d-flex gap-3 flex-wrap">
    @foreach (var category in categories)
    {
        <div class="card p-4 text-center shadow-sm category-card" @onclick='() => GoToCategory(category.Name)'>
            <h5 class="category-name">@FormatCategoryName(category.Name)</h5>
            <p class="category-description">@category.Description</p>
        </div>
    }
</div>

@code {
    // Classe auxiliar para armazenar os dados do cartão
    public class CategoryCard
    {
        public string Name { get; set; } = string.Empty;
        public string Description { get; set; } = string.Empty;
    }

    // Helper method to format category names (add spaces before capitals)
    private string FormatCategoryName(string name)
    {
        if (string.IsNullOrEmpty(name))
            return name;
        
        // Add space before capital letters that are followed by lowercase letters
        // This keeps acronyms like "RCT" together while separating words
        return Regex.Replace(name, "(?<!^)([A-Z](?=[a-z]))", " $1");
    }

    // Lista de categorias com nomes e descrições amigáveis
    private List<CategoryCard> categories = new List<CategoryCard>
    {
        new CategoryCard { Name = "ImpressionMaterials", Description = "Impression materials" },
        new CategoryCard { Name = "CementationMaterials", Description = "Cementation materials" },
        new CategoryCard { Name = "RestorationMaterials", Description = "Restoration materials" },
        new CategoryCard { Name = "Disposables", Description = "Disposable materials" },
        new CategoryCard { Name = "Extraction", Description = "Extraction materials" },
        new CategoryCard { Name = "Burs", Description = "Burs and tips" },
        new CategoryCard { Name = "ImplantAcessories", Description = "Implant accessories" },
        new CategoryCard { Name = "Ortodontics", Description = "Orthodontics materials" },
        new CategoryCard { Name = "Cleaning", Description = "Cleaning materials" },
        new CategoryCard { Name = "EndodonticsRCT", Description = "Root canal treatment materials" },
        new CategoryCard { Name = "Durables", Description = "Long-lasting items" },
        new CategoryCard { Name = "UsageMaterials", Description = "Daily consumption items" }
    };


    void GoToCategory(string category)
    {
        Nav.NavigateTo($"/materiais/{category}");
    }
}

<style>
    .category-card {
        cursor: pointer;
        width: 220px;
        transition: all 0.3s ease;
    }

    .category-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 16px rgba(0,0,0,0.15) !important;
    }

    .category-name {
        word-break: keep-all;
        overflow-wrap: break-word;
        hyphens: none;
        line-height: 1.3;
    }

    .category-description {
        font-size: 0.9rem;
        color: #666;
        margin-bottom: 0;
    }
</style>
